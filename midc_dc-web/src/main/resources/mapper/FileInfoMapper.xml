<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.cw.midc.entity.FileInfo" >
  <resultMap id="BaseResultMap" type="org.cw.midc.entity.FileInfo">
    <id column="file_id" property="fileId" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="failed_reason" property="failedReason" jdbcType="VARCHAR" />
    <result column="file_path" property="filePath" jdbcType="VARCHAR" />
    <result column="hospital_id" property="hospitalId" jdbcType="VARCHAR" />
    <result column="media_id" property="mediaId" jdbcType="VARCHAR" />
    <result column="orig_file_name" property="origFileName" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="study_info_id" property="studyInfoId" jdbcType="VARCHAR" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="user_id" property="userId" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select * 
    from file_info
    where file_id = #{fileId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from file_info
    where file_id = #{fileId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="org.cw.midc.entity.FileInfo" >
    insert into file_info (file_id, create_time, failed_reason, 
      file_path, hospital_id, media_id, 
      orig_file_name, status, study_info_id, 
      update_time, user_id)
    values (#{fileId,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{failedReason,jdbcType=VARCHAR}, 
      #{filePath,jdbcType=VARCHAR}, #{hospitalId,jdbcType=VARCHAR}, #{mediaId,jdbcType=VARCHAR}, 
      #{origFileName,jdbcType=VARCHAR}, #{status,jdbcType=VARCHAR}, #{studyInfoId,jdbcType=VARCHAR}, 
      #{updateTime,jdbcType=TIMESTAMP}, #{userId,jdbcType=VARCHAR})
  </insert>
  <update id="updateStatusById" parameterType="java.util.Map" >
    update file_info set status = #{status,jdbcType=VARCHAR}, failed_reason = #{failedReason,jdbcType=VARCHAR}
    where file_id = #{fileId,jdbcType=VARCHAR}
  </update>
  
  <select id="selectByStatus" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select * 
    from file_info
    where status = #{status,jdbcType=VARCHAR}
    order by create_time asc
  </select>
  
</mapper>